<link rel="stylesheet" href="../../static/css/post-list.css">
<div class="book-search" th:fragment="book-search">

    <form th:action="@{/books}" method="get">
        <input type="text" name="query" placeholder="검색" th:value="${query}">
        <input type="submit" value="검색">
    </form>

    <table>
        <!-- 리스트 헤더 -->
        <thead>
            <tr>
                <th class="image">사진</td>
                <th class="title">제목</td>
                <th class="author">작가</td>
                <th class="pubdate">출간일</td>
                <th class="upload-button">독서록 작성</td>
            </tr>
        </thead>


        <!-- 리스트 목록 -->
        <tbody>
            <tr th:each="element : ${bookList}">

                <td class="image"><img th:src="${element.image}" alt="no image"></td>
                <td class="title" th:text="${element.title}">책 제목</td>
                <td class="author" th:text="${element.author}"></td>
                <td class="pubdate" th:text="${element.pubdate}">YYYY-MM-DD</td>
                <td class="upload-button">
                    <form th:action="@{/books/{isbn}/posts/upload(isbn=${element.isbn})}" method="get">
                        <input th:if="${login}" type="submit" value="독서록 작성">
                        <input th:if="${!login}" type="submit" value="독서록 작성" disabled>
                    </form>
                </td>
            </tr>
        </tbody>

    </table>

    <!-- 페이지바 -->
    <div class = "pageBar" th:if="${pageBar != null}">
        <a class="prev" th:if="${pageBar.prev}" th:href="@{/books(query=${query}, page=${pageBar.start} - 1 )}"> < </a>
        <th:block th:each="number : ${#numbers.sequence(pageBar.start, pageBar.end)}">
            <a class="number" th:classappend="${number == pageBar.current ? 'current' : '' }" th:text="${number}" th:href="@{/books(query=${query}, page=${number})}"></a>
        </th:block>
        <a class="next" th:if="${pageBar.next}" th:href="@{/books(query=${query}, page=${pageBar.end} + 1)}"> > </a>
    </div>

</div>